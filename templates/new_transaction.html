<!doctype html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Add Transaction</title>
  <style>
    body { font-family:-apple-system,system-ui,Arial; margin:24px; }
    input, select {
      padding:10px; width:100%; margin:6px 0 12px;
      border-radius:10px; border:1px solid #ccc; box-sizing:border-box;
    }
    button { padding:10px 12px; border-radius:10px; border:0; background:#111; color:#fff; width:100%; }
    .muted { color:#666; font-size:13px; }
    .row { display:flex; gap:10px; margin-top:12px; }
    .link {
      display:inline-block; padding:10px 12px; border:1px solid #333; border-radius:10px;
      text-decoration:none; color:#111; text-align:center; flex:1;
    }
    details { margin: 6px 0 12px; }
    summary { cursor:pointer; }
  </style>
</head>
<body>
  <h2>‚ûï Add Transaction</h2>
  <p class="muted">Tip: Use <b>Source</b> to separate Rental vs Work so reports stay clean.</p>

  <div class="row" style="margin-bottom:12px;">
    <a class="link" href="/ui">üè† Home</a>
    <a class="link" href="/ui/report">üìä Reports</a>
  </div>

  <form method="post" action="/ui/transaction/new">
    <label>Date</label>
    <input name="tx_date" type="date" required />

    <label>Source</label>
    <select name="source" required>
      <option value="rental" {% if default_source == 'rental' %}selected{% endif %}>Rental Property</option>
      <option value="work" {% if default_source == 'work' %}selected{% endif %}>Work Expense</option>
    </select>

    <label>Type</label>
    <select name="type" required>
      <option value="income" {% if default_type == 'income' %}selected{% endif %}>Income</option>
      <option value="expense" {% if default_type == 'expense' %}selected{% endif %}>Expense</option>
    </select>

    <label>Category</label>
    <select name="category" required>
      <option value="">Select a category‚Ä¶</option>
      {% for c in categories %}
        <option value="{{ c.name }}">{{ c.name }}</option>
      {% endfor %}
    </select>

    <details>
      <summary>‚ûï Add a new category</summary>
      <p class="muted">Add it once and it will appear in the dropdown next time.</p>
      <form method="post" action="/ui/category/add" style="margin-top:10px;">
        <input name="name" placeholder="e.g., Appliance Repair, Cleaning, Parking‚Ä¶" required />
        <button type="submit">Save Category</button>
      </form>
    </details>

    <label>Amount</label>
    <input name="amount" type="number" step="0.01" required />

    <label>Vendor (optional)</label>
    <input name="vendor" placeholder="Shell, Home Depot, Restaurant‚Ä¶" />

    <label>Notes (optional)</label>
    <input name="notes" placeholder="Anything you want to remember" />

    <button type="submit">üíæ Save Transaction</button>
  </form>
</body>
</html>
